this is a lot like #4 but has a compound loop.
